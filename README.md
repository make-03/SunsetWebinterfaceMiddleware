# SunsetWebinterfaceMiddleware-PROTOTYPE

#### Creator: Markus Ropatsch

#### Supervisor: Stefan Rass

---

This is the private repository for the project **Sunset Webinterface Middleware**.

##### IMPORTANT: for executing *.jar file (generated by Spring Boot) via command line: `keystore.jks` AND `sunset.jar` must be copied to the same folder from where the *.jar file is executed

Certain features of the Java-Code are not implemented yet but might get added later.

**UPDATE [04.04.2019]** You can now also execute the program via the commandline using the `jar`-File generated by Spring Boot! (Executing the program via Spring Boot inside of Eclipse worked without any issues)
> ~~**UPDATE [03.04.2019]**: executing the program in command line via the `*.jar`-File generated by Spring Boot causes the following error when trying to execute code via the webinterface: `There was an unexpected error (type=Internal Server Error, status=500). Error resolving template "/index", template might not exist or might not be accessible by any of the configured Template Resolvers.`~~

This project features the already existing webinterface created by **Peter Pfaffeneder** with some modifications.
> ~~The Web Interface in this version only contains the bare minimum of context (no CSS, minimal Javascript) to be able to use its features.~~

The source code for **Sunset** can be found here: [Sunset Github](https://github.com/stefan-rass/sunset-ffapl)

---

##### Main programming languages: `Java 8` for Middleware, `Java Script (+ HTML5, CSS3)` for WebInterface
##### IDE used: `Eclipse Java EE IDE for Web Developers Version 2018-09 (4.9.0)`
##### Build-Management-Tool: `Maven`
##### Frameworks used: `Spring`, `Spring-Boot` (Spring Tools 4 - 4.1.0 RELEASE)
##### Other Software used: `thymeleaf` (template engine), `Code Mirror`, `JQuery`

---

> The following lists of features is **not final** and certain things may change in the future (finished AND unfinished ones)!

## List of changes + working features:
* [04-04-2019] renamed `templates` folder to `static_templates` inside `src/main/resources/static` because there already exists a `templates`-folder which is used by the controller-class
* [04-04-2019] updated code example for RSA to the current version in the `ffapl_api.js`-File
* [04-04-2019] changed name of downloadable files from website (save-button) to automatically look like: `sunsetcode_<DD-MM-YYYY>_<HH-MM-SS>.ffapl`
* [04-04-2019] fixed the issue with the dispatcher servlet (error 500) when executing program via commandline, you can now execute program via the commandline!

---

* [03-04-2019] resolved errors for code examples inside `ffapl_api.js`, changed **single quotes** to **double quotes** inside `print(ln)` statements
* [03-04-2019] included template engine **thymeleaf** (added to `pom.xml`) and updated controller class to show results of the sunset execution in the correct element of the webinterface (`outputTextArea`)
    * controller methods now return `ModelandView` instead of just `String` (plain text)
* [03-04-2019] renamed `/resources/public` to `/resources/templates` to make **thymeleaf** work properly when calling cotroller-methods
* [03-04-2019] modified `index.html` and `sunset-max-stylesheet.css` to better show the `outputTextField` and added code for **thymeleaf**
* [03-04-2019] implemented the **save** function in the `sunset-max-frontend-functions.js`-file for the webinterface (save button) -> you can now download code from the input console as a `*.ffapl`-file and load these files via the **load** button

---

* [02-04-2019] updated the minimal webinterface to the already existing one created by **Peter Pfaffeneder** with some modifications + added all the static web content under `/resources/static`
* [02-04-2019] changed name of java packages for better readability + updated `pom.xml`

---

* [27-03-2019] executing sunset (via commandline) using java + passing code from website
* [27-03-2019] reading sunset output from commandline and sending it to the webinterface (only plain text for now)
* [27-03-2019] parallel execution of several independent user requests already possible (data for each user created locally inside specific controller class, so each user has its own private data stored in memory)
* [27-03-2019] manually cancelling execution of sunset possible (via button on website ONLY while code is executing) **BUT** currently terminates the main `java.exe` process which also terminates all other concurrent sunset executions AND the executable **jar**-file created by Spring-Boot if it is running via the command line

---

* [26-03-2019] created basic controller class for implementing HTTP-Methods (GET, POST etc.)
* [26-03-2019] sending data (code for **sunset**) from webinterface (browser) to java-program (webserver)
* [26-03-2019] communication with server only via port 443 (SSL enabled!) using privately signed certificate for testing (EXPERIMENTAL)

---

* [25-03-2019] created maven-project in eclipse + add dependencies: spring, spring-boot 
* [25-03-2019] created basic structure for program (`src/main/java`, `src/main/resources`, `src/test/java`)
* [25-03-2019] created basic webinterface + javascript

---

## List of features to implement/create in the future:
* create logger class and store logging info (in local **log** files); create 2 seperate logging files for different content: **info.log** and **error.log**
* edit existing `sunset webinterface`
     * change/remove unused functions or scripts
          * e.g. program code for PHP (not used in this version!)
     * add basic console logging in java script
     * change/remove/restructure elements (e.g. buttons or sidebar elements)
* testing of the following scenarios:
     * limiting concurrent threads in `application.properties` and test what happens when several users want to execute code concurrently
     * what happens if user closes browser window during execution of code?
* implement solution for manually cancelling only the corresponding sunset process for a specific user instead of terminating all java processes
     * research process builder as a possible solution
     * maybe use session id to uniquely identify client requests (and map them to corresponding pid -> use Map-datatype)
* **potential future tasks, currently not needed**     
     * research `Docker` and its basic functionalities
     * deploy generated .jar file + keystore + sunset.jar in docker-container and run it

---

Last edited @ [04.04.2019]
